/*
 * Anti_backlash.h
 *
 *  Created on: Jun 3, 2025
 *      Author: User
 */

#ifndef INC_ANTI_BACKLASH_H_
#define INC_ANTI_BACKLASH_H_

#include "arm_math.h"

typedef enum {
    ENGAGED_POS = 1,
    ENGAGED_NEG = -1,
    TRANSITION = 0
} BacklashState;

typedef struct {
    float32_t backlash_width;
    float32_t backlash_offset;
    int8_t direction_prev;
    BacklashState state;
} BacklashController;

void Backlash_Init(BacklashController *ctrl, float32_t backlash_width);
float32_t Backlash_Update(BacklashController *ctrl, float32_t pos_ref, float32_t pos_act, float32_t vel);

#endif /* INC_ANTI_BACKLASH_H_ */
